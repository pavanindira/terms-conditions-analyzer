{% extends "base.html" %}
{% block title %}T&amp;C Analyzer â€” Read Before You Sign{% endblock %}

{% block content %}

<section class="hero">
  <div class="hero-inner">
    <div class="badge">âš–ï¸ Rule-Based Legal Assistant</div>
    <h1 class="hero-title">
      Terms &amp; Conditions<br>
      <span class="gold">Analyzer</span>
    </h1>
    <p class="hero-sub">
      Paste, upload, or photograph any Terms &amp; Conditions document.<br>
      Get a plain-English breakdown â€” instantly, with no AI.
    </p>
  </div>
</section>

<section class="form-section">
  <form action="{{ url_for('analyze_doc') }}" method="POST" enctype="multipart/form-data" id="analyzeForm">

    <div class="tabs" id="inputTabs">
      <button type="button" class="tab active" data-tab="paste">ğŸ“‹ Paste Text</button>
      <button type="button" class="tab" data-tab="upload">ğŸ“‚ Upload File</button>
      <button type="button" class="tab" data-tab="image">ğŸ“· Image / Photo</button>
    </div>

    {# â”€â”€ Paste panel â”€â”€ #}
    <div class="tab-panel active" id="tab-paste">
      <label class="field-label" for="text">Paste your T&amp;C document here</label>
      <textarea
        id="text"
        name="text"
        class="doc-textarea"
        placeholder="Paste the full Terms &amp; Conditions text hereâ€¦

Works with: insurance Â· loans Â· mortgages Â· SaaS Â· mobile apps
employment Â· leases Â· healthcare Â· telecom Â· e-commerce Â· and more."
        spellcheck="false"
      ></textarea>
      <div class="char-counter">
        <span id="charCount">0</span> characters &nbsp;Â·&nbsp; <span id="wordCount">0</span> words
      </div>
    </div>

    {# â”€â”€ File upload panel â”€â”€ #}
    <div class="tab-panel" id="tab-upload">
      <label class="field-label">Upload a .txt or .pdf file</label>
      <div class="drop-zone" id="dropZone" data-accept=".txt,.pdf">
        <div class="drop-icon">ğŸ“„</div>
        <p class="drop-text">Drag &amp; drop your file here</p>
        <p class="drop-sub">or click to browse &nbsp;Â·&nbsp; <strong>.txt</strong> or <strong>.pdf</strong></p>
        <input type="file" name="file" id="fileInput" accept=".txt,.pdf" class="file-input-hidden" />
        <div class="file-chosen" id="fileChosen"></div>
      </div>
    </div>

    {# â”€â”€ Image upload panel â”€â”€ #}
    <div class="tab-panel" id="tab-image">
      <label class="field-label">Upload an image of your document</label>
      <div class="drop-zone image-zone" id="dropZoneImg" data-accept=".png,.jpg,.jpeg,.webp,.tiff,.bmp">
        <div class="drop-icon">ğŸ“·</div>
        <p class="drop-text">Drag &amp; drop your image here</p>
        <p class="drop-sub">or click to browse &nbsp;Â·&nbsp; <strong>PNG, JPG, JPEG, WEBP, TIFF, BMP</strong></p>
        <input type="file" name="file" id="fileInputImg"
               accept=".png,.jpg,.jpeg,.webp,.tiff,.bmp,.gif"
               class="file-input-hidden" />
        <div class="file-chosen" id="fileChosenImg"></div>
        <div class="img-preview-wrap" id="imgPreviewWrap" style="display:none">
          <img id="imgPreview" src="" alt="Preview" class="img-preview" />
        </div>
      </div>
      <div class="image-tips">
        <span class="tip-icon">ğŸ’¡</span>
        <span>For best results: use good lighting, keep the document flat, and make sure the text is sharp and not blurry.</span>
      </div>
    </div>

    <button type="submit" class="btn-analyze" id="submitBtn">
      <span class="btn-icon">âš¡</span> Analyze Document
    </button>

  </form>
</section>

{# â”€â”€ Supported document types â”€â”€ #}
<section class="doc-types-section">
  <h2 class="section-sub-heading">Supported Document Types</h2>
  <div class="doc-types-grid">
    {% set doc_types = [
      ("ğŸ¥", "Insurance Policy"),
      ("ğŸ’µ", "Loan / Credit Agreement"),
      ("ğŸ ", "Mortgage Agreement"),
      ("ğŸ“ˆ", "Investment / Securities"),
      ("ğŸ”‘", "Lease / Rental Agreement"),
      ("ğŸ’¼", "Employment Contract"),
      ("â˜ï¸", "SaaS / Software License"),
      ("ğŸ“±", "Mobile App Terms"),
      ("ğŸ–¥ï¸", "Cloud Services Agreement"),
      ("ğŸ”“", "Open Source License"),
      ("ğŸ›’", "E-Commerce / Shopping"),
      ("ğŸ””", "Subscription Service"),
      ("ğŸ¬", "Streaming / Media"),
      ("âœˆï¸", "Travel & Hospitality"),
      ("ğŸ“¡", "Telecommunications"),
      ("ğŸ¥", "Healthcare / Medical"),
      ("ğŸ’¹", "Financial Advisory"),
      ("ğŸ”’", "Privacy Policy"),
      ("ğŸ“£", "Social Media Platform"),
      ("ğŸŒ", "Website Terms of Use"),
    ] %}
    {% for icon, name in doc_types %}
    <div class="doc-type-chip">
      <span class="chip-icon">{{ icon }}</span>
      <span>{{ name }}</span>
    </div>
    {% endfor %}
  </div>
</section>

{# â”€â”€ Feature strip â”€â”€ #}
<section class="features">
  <div class="feature">
    <div class="feature-icon">ğŸ“·</div>
    <div class="feature-text">
      <strong>Image & OCR Support</strong>
      <span>Upload photos or scans of documents</span>
    </div>
  </div>
  <div class="feature">
    <div class="feature-icon">ğŸ—‚ï¸</div>
    <div class="feature-text">
      <strong>20 Document Types</strong>
      <span>Insurance, loans, SaaS, healthcare &amp; more</span>
    </div>
  </div>
  <div class="feature">
    <div class="feature-icon">ğŸš©</div>
    <div class="feature-text">
      <strong>Red Flag Detection</strong>
      <span>Spots aggressive or unusual clauses</span>
    </div>
  </div>
  <div class="feature">
    <div class="feature-icon">ğŸ”</div>
    <div class="feature-text">
      <strong>100% Private</strong>
      <span>No AI, no external APIs â€” runs entirely locally</span>
    </div>
  </div>
</section>

{% endblock %}
