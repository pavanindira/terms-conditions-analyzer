<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ comp.winner_name }} is the safest ‚Äî {{ comp.rankings|length }} T&Cs Ranked</title>
  <meta property="og:title"       content="{{ comp.winner_name }} ranked #1 out of {{ comp.rankings|length }} documents" />
  <meta property="og:description" content="{{ comp.winner_reason }}" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --gold:  #d4af37; --dark: #0d0d0d; --card: #111111;
      --border: rgba(255,255,255,0.08); --text: #f0ebe1;
      --muted: rgba(240,235,225,0.5);
      --green: #4caf84; --yellow: #f4c842; --red: #ff6b7a; --indigo: #818cf8;
    }
    body {
      font-family: 'DM Sans', sans-serif; background: var(--dark);
      color: var(--text); min-height: 100vh;
      display: flex; align-items: center; justify-content: center; padding: 2rem;
    }
    .card {
      width: 100%; max-width: 600px; background: var(--card);
      border: 1px solid var(--border); border-radius: 24px; padding: 2.2rem;
      box-shadow: 0 32px 80px rgba(0,0,0,0.6);
    }
    .brand { display: flex; align-items: center; gap: 8px; margin-bottom: 1.6rem;
      color: var(--muted); font-size: 0.78rem; letter-spacing: 1px; text-transform: uppercase; }
    .brand-gold { color: var(--gold); font-weight: 700; }
    .share-title { font-family: 'Playfair Display', serif; font-size: 1.5rem;
      font-weight: 900; margin-bottom: 0.4rem; }
    .share-sub { font-size: 0.85rem; color: var(--muted); margin-bottom: 1.4rem; }
    hr { border: none; border-top: 1px solid var(--border); margin: 1.2rem 0; }

    /* Ranked list */
    .rank-list { display: flex; flex-direction: column; gap: 8px; margin-bottom: 1.4rem; }
    .rank-row {
      display: flex; align-items: center; gap: 12px; padding: 10px 14px;
      background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 12px;
    }
    .rank-row.rank-1 { border-color: rgba(212,175,55,0.35); background: rgba(212,175,55,0.05); }
    .rank-row.rank-last { border-color: rgba(255,107,122,0.2); background: rgba(255,107,122,0.03); }
    .rk-medal { font-size: 1.3rem; flex-shrink: 0; width: 28px; text-align: center; }
    .rk-num { font-size: 0.8rem; font-weight: 700; color: var(--muted); width: 28px; text-align: center; }
    .rk-name { flex: 1; font-weight: 600; font-size: 0.92rem; }
    .rk-score { font-size: 0.8rem; font-weight: 700; }
    .rk-badge {
      font-size: 0.65rem; font-weight: 700; padding: 3px 8px;
      border-radius: 100px; letter-spacing: 0.5px;
    }
    .badge-Low    { background: rgba(76,175,132,0.15);  color: var(--green);  border: 1px solid rgba(76,175,132,0.3); }
    .badge-Medium { background: rgba(244,200,66,0.15);  color: var(--yellow); border: 1px solid rgba(244,200,66,0.3); }
    .badge-High   { background: rgba(255,107,122,0.15); color: var(--red);    border: 1px solid rgba(255,107,122,0.3); }

    /* Rec box */
    .rec-box { background: rgba(99,102,241,0.06); border: 1px solid rgba(99,102,241,0.2);
      border-radius: 12px; padding: 1rem 1.2rem; margin-bottom: 1.2rem; }
    .rec-label { font-size: 0.65rem; font-weight: 700; letter-spacing: 1.5px;
      text-transform: uppercase; color: var(--indigo); margin-bottom: 0.4rem; }
    .rec-text { font-size: 0.85rem; color: rgba(240,235,225,0.78); line-height: 1.6; }

    /* Footer */
    .share-footer { display: flex; align-items: center; justify-content: space-between;
      padding-top: 1rem; border-top: 1px solid var(--border); }
    .share-url { font-size: 0.7rem; color: var(--muted); font-family: monospace; }
    .share-cta { font-size: 0.75rem; color: var(--gold); text-decoration: none; font-weight: 600; }
    .share-cta:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="card">
    <div class="brand">
      <span class="brand-gold">‚öñÔ∏è T&amp;C Analyzer</span>
      <span>¬∑</span>
      <span>{{ comp.rankings|length }} Documents Ranked</span>
    </div>

    <div class="share-title">üèÜ {{ comp.winner_name }} is the safest choice</div>
    <div class="share-sub">{{ comp.winner_reason }}</div>

    <div class="rank-list">
      {% set n = comp.rankings|length %}
      {% for r in comp.rankings %}
      <div class="rank-row {% if r.rank == 1 %}rank-1{% elif r.rank == n %}rank-last{% endif %}">
        <div class="{% if r.rank <= 3 %}rk-medal{% else %}rk-num{% endif %}">
          {% if r.rank == 1 %}ü•á{% elif r.rank == 2 %}ü•à{% elif r.rank == 3 %}ü•â{% else %}{{ r.rank }}{% endif %}
        </div>
        <div class="rk-name">{{ r.name }}</div>
        <span class="rk-badge badge-{{ r.result.risk_level }}">{{ r.result.risk_level }}</span>
        <div class="rk-score" style="color:{% if r.result.risk_level == 'Low' %}var(--green){% elif r.result.risk_level == 'Medium' %}var(--yellow){% else %}var(--red){% endif %}">
          {{ r.result.risk_score }}/100
        </div>
      </div>
      {% endfor %}
    </div>

    {% if comp.llm_enhanced and comp.llm_pick %}
    <div class="rec-box">
      <div class="rec-label">ü§ñ AI ¬∑ {{ comp.llm_model }}</div>
      <div class="rec-text">{{ comp.llm_pick }}</div>
    </div>
    {% endif %}

    <div class="share-footer">
      <span class="share-url">tc-analyzer ¬∑ {{ key[:8] }}‚Ä¶</span>
      <a href="{{ url_for('multi_compare_result', key=key) }}" class="share-cta">
        Full breakdown + category matrix ‚Üí
      </a>
    </div>
  </div>
</body>
</html>
